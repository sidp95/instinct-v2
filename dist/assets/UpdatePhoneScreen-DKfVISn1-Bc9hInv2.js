import{d5 as h,dA as S,d7 as f,d9 as p,d4 as s}from"./index-BZUZJG0z.js";import{F as w}from"./PhoneIcon-DO-kIy-O.js";import{w as y}from"./ConnectPhoneForm-CYfqSIAI-BDD9A_n5.js";import{n as g}from"./ScreenLayout-DIdy7nhJ-CtKEKsly.js";import"./ModalHeader-D5psNgrf-BlEKM6aB.js";import"./Chip-D2-wZOHJ-DUiT6Tro.js";import"./LoadingSkeleton-U6-3yFwI-BqvAdjZO.js";import"./Screen-q8npRQhQ-DadJ2eBF.js";import"./index-Dq_xe9dz-CmgW7sSb.js";const P=({title:o="Update your phone number",subtitle:t="Add the phone number you'd like to use going forward. We'll send you a confirmation code",onSubmit:r,isSubmitting:a=!1})=>{let[e,n]=p.useState(null);return s.jsx(g,{title:o,subtitle:t,icon:w,primaryCta:{label:a?"Submitting":"Update",onClick:async()=>{e!=null&&e.qualifiedPhoneNumber&&await r(e)},disabled:!(e!=null&&e.isValid)||a},watermark:!0,children:s.jsx(y,{onChange:i=>{n(i)},onSubmit:async()=>{},noIncludeSubmitButton:!0,hideRecent:!0})})},A={component:()=>{let{currentScreen:o,data:t,navigate:r,setModalData:a}=h(),{user:e}=S(),{initUpdatePhone:n}=f(),[i,u]=p.useState(!1);return s.jsx(P,{onSubmit:async c=>{var d,m,l;u(!0);try{if(!((d=e==null?void 0:e.phone)!=null&&d.number))throw Error("User is required to have an phone number to update it.");await n((m=e==null?void 0:e.phone)==null?void 0:m.number,c.qualifiedPhoneNumber),r("AwaitingPasswordlessCodeScreen")}catch(b){a({errorModalData:{error:b,previousScreen:((l=t==null?void 0:t.errorModalData)==null?void 0:l.previousScreen)||o||"LinkPhoneScreen"}}),r("ErrorScreen")}finally{u(!1)}},isSubmitting:i})}};export{A as UpdatePhoneScreen,P as UpdatePhoneScreenView,A as default};
