import{d4 as d,d5 as y,d6 as C,d7 as g,d9 as l,dP as h,df as w}from"./index-BZUZJG0z.js";import{j as k}from"./WalletInfoCard-BtliVaf0-C-OpDWgj.js";import{n as A}from"./ScreenLayout-DIdy7nhJ-CtKEKsly.js";import{C as S}from"./circle-alert-BQcjtTIg.js";import{C as b}from"./circle-check-big-CartQiBB.js";import{c as j}from"./createLucideIcon-B72mi0g_.js";import"./ModalHeader-D5psNgrf-BlEKM6aB.js";import"./ErrorMessage-D8VaAP5m-C-TFvMaa.js";import"./LabelXs-oqZNqbm_-D0IQxw2J.js";import"./Address-BGlhcEcA-BeY89XEP.js";import"./check-BDT86Nu8.js";import"./copy-PrcWgVQF.js";import"./shared-FM0rljBt-CEF3ZWm_.js";import"./Screen-q8npRQhQ-DadJ2eBF.js";import"./index-Dq_xe9dz-CmgW7sSb.js";/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],v=j("cloud-upload",x),D=({appName:o,address:r,success:s,error:e,onAccept:n,onDecline:t,onClose:a})=>d.jsx(A,s||e?{title:e?"Something went wrong":"Success!",subtitle:e?"Please try again.":`You've successfully granted delegated action permissions to ${o}.`,icon:e?S:b,iconVariant:e?"error":"success",onBack:a,watermark:!0}:{title:"Enable offline access",subtitle:`By confirming, ${o} will be able to use your wallet for you even when you're not around. You can revoke this later.`,icon:v,primaryCta:{label:"Accept",onClick:n},secondaryCta:{label:"Not now",onClick:t},onBack:a,watermark:!0,children:d.jsx(k,{address:r,title:"Wallet"})}),R={component:()=>{let{data:o}=y(),r=C(),{closePrivyModal:s}=g(),[e,n]=l.useState(!1),[t,a]=l.useState(),{address:u,onDelegate:m,onSuccess:p,onError:f}=o.delegatedActions.consent,c=async()=>{e?p():f(t??new w("User declined delegating actions.")),s({shouldCallAuthOnSuccess:!1})};return l.useEffect((()=>{if(!e&&!t)return;let i=setTimeout(c,h);return()=>clearTimeout(i)}),[e,t]),d.jsx(D,{appName:r.name,address:u,success:e,error:t,onAccept:async()=>{try{await m(),n(!0)}catch(i){a(i)}},onDecline:()=>{c()},onClose:c})}};export{R as DelegatedActionsConsentScreen,D as DelegatedActionsConsentScreenView,R as default};
