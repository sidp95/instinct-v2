import{d9 as d,d4 as e,d7 as w,d$ as V,d6 as L,eD as u,e5 as p,eU as Y,eV as z,eW as D,dc as H,eu as U,ex as W,cl as q,ds as N}from"./index-BZUZJG0z.js";import{E as O,l as g,s as Q,x as T,c as b,d as f,V as X,b as y,w as E,F as I,T as F,p as S,u as G}from"./PinInput-3SLvbnQa-CalC7LOu.js";import{F as J}from"./FingerPrintIcon-BXA1Qwfw.js";import{F as M}from"./PhoneIcon-DO-kIy-O.js";import{F as R}from"./ShieldCheckIcon-B-NJHB3m.js";import{T as k,m as K,g as x,$ as B}from"./ModalHeader-D5psNgrf-BlEKM6aB.js";import{n as Z}from"./ScreenLayout-DIdy7nhJ-CtKEKsly.js";import{F as _}from"./ExclamationTriangleIcon-CLH_TsZy.js";import{i as ee}from"./StackedContainer-B2vaEl56-CK5LNgwx.js";import{c as re}from"./useGetTokenPrice-C1-pGMgN-DqVN8PHa.js";import{$ as se}from"./TransactionDetails-DB8AH1mq-yGptQR4G.js";function ne({title:s,titleId:r,...n},o){return d.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":r},n),s?d.createElement("title",{id:r},s):null,d.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"}))}const oe=d.forwardRef(ne),ge=({handleClose:s,user:r,onSelect:n})=>e.jsxs(Z,{title:"Verify your identity",subtitle:"Choose a verification method",icon:R,iconVariant:"subtle",onClose:s,showClose:!0,watermark:!0,children:[e.jsxs(G,{children:[r.mfaMethods.includes("totp")&&e.jsxs(u,{onClick:()=>n("totp"),children:[e.jsx(p,{children:e.jsx(I,{})}),"Authenticator app"]},"totp"),r.mfaMethods.includes("sms")&&e.jsxs(u,{onClick:()=>n("sms"),children:[e.jsx(p,{children:e.jsx(M,{})}),"SMS"]},"sms"),r.mfaMethods.includes("passkey")&&e.jsxs(u,{onClick:()=>n("passkey"),children:[e.jsx(p,{children:e.jsx(J,{})}),"Passkey"]},"passkey")]}),e.jsx(x,{})]}),C=({pendingTransaction:s})=>{let{wallets:r}=H(),{walletProxy:n,rpcConfig:o,chains:a,appId:c,nativeTokenSymbolForChainId:t}=w(),[i,h]=d.useState(null),[l,$]=d.useState(s),{tokenPrice:A}=re(l.chainId),P=t(s.chainId)||"ETH",m=d.useMemo((()=>r.find((j=>j.walletClientType==="privy"))),[r]);return d.useEffect((()=>{(async function(){if(!n||!m)return l;let j=U(l.chainId,a,o,{appId:c}),v=await W(l,j,m.address);return h(q(BigInt(v.gas??0))),v})().then($).catch(console.error)}),[n]),m?e.jsx(te,{children:e.jsx(se,{from:m.address,to:l.to,txn:l,gas:i??void 0,tokenPrice:A,tokenSymbol:P})}):null};let te=N.div`
  width: 100%;
  padding: 1rem 0;
`;const fe=({hasBlockingError:s,error:r,onClose:n,onBack:o,handleSubmit:a,account:c,submitSuccess:t})=>{var h;let{pendingTransaction:i}=w();return e.jsxs(e.Fragment,{children:[e.jsx(k,{onClose:n},"header"),e.jsx(ee,{children:e.jsxs("div",{children:[e.jsx(V,{success:t,fail:!!r}),e.jsx(r?_:O,{style:{width:"38px",height:"38px"}})]})}),e.jsx(g,{style:{marginTop:"1rem"},children:"Verifying with passkey"}),e.jsxs(Q,{children:[e.jsxs(T,{children:[e.jsx(b,{children:e.jsx(R,{})}),"Approve this action using your touch, face, PIN, or hardware key."]}),e.jsxs(T,{children:[e.jsx(b,{children:e.jsx(oe,{})}),"You last added a passkey on"," ",(h=c==null?void 0:c.firstVerifiedAt)==null?void 0:h.toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"}),"."]})]}),i&&e.jsx(f,{children:e.jsx(C,{pendingTransaction:i})}),r&&e.jsxs(e.Fragment,{children:[e.jsx(X,{style:{marginTop:"1.25rem"},children:r.message}),e.jsx(K,{disabled:s,onClick:a,style:{margin:"1.25rem auto 0"},children:"Try again"})]}),o&&e.jsx(y,{style:{marginTop:"1rem"},onClick:o,children:"Choose another method"}),e.jsx(x,{})]})},ye=({selectedMethod:s,submitSuccess:r,hasBlockingError:n,onClose:o,onBack:a,handleSubmitCode:c})=>{let t=L(),{pendingTransaction:i}=w();switch(s){case"sms":return e.jsxs(e.Fragment,{children:[e.jsx(k,{onClose:o},"header"),e.jsx(E,{style:{marginBottom:"1.5rem"},children:e.jsx(M,{})}),e.jsx(g,{children:"Enter verification code"}),e.jsxs(f,{children:[e.jsx(F,{success:r,disabled:n,onChange:c}),e.jsxs(S,{children:["To continue, please enter the 6-digit code sent to your ",e.jsx("strong",{children:"mobile device"})]}),i&&e.jsx(C,{pendingTransaction:i})]}),a&&e.jsx(y,{theme:t==null?void 0:t.appearance.palette.colorScheme,onClick:a,children:"Choose another method"}),e.jsx(B,{onClick:o,children:"Cancel"}),e.jsx(x,{})]});case"totp":return e.jsxs(e.Fragment,{children:[e.jsx(k,{onClose:o},"header"),e.jsx(E,{style:{marginBottom:"1.5rem"},children:e.jsx(I,{})}),e.jsx(g,{children:"Enter verification code"}),e.jsxs(f,{children:[e.jsx(F,{success:r,disabled:n,onChange:c}),e.jsxs(S,{children:["To continue, please enter the 6-digit code generated from your"," ",e.jsx("strong",{children:"authenticator app"})]}),i&&e.jsx(C,{pendingTransaction:i})]}),a&&e.jsx(y,{theme:t==null?void 0:t.appearance.palette.colorScheme,onClick:a,children:"Choose another method"}),e.jsx(B,{onClick:o,children:"Cancel"}),e.jsx(x,{})]});default:return null}},ke=s=>Y(s)?{isBlocking:!0,error:Error("You have exceeded the maximum number of attempts. Please close this window and try again in 10 seconds.")}:z(s)?{isBlocking:!1,error:Error("The code you entered is not valid")}:D(s)?{isBlocking:!0,error:Error("You have exceeded the time limit for code entry. Please try again in 30 seconds.")}:(console.error(s),{isBlocking:!1,error:Error("Something went wrong.")});export{fe as Q,ye as R,ge as U,ke as X};
