import{df as u,db as f,d9 as y}from"./index-BZUZJG0z.js";const m=792703809,w="11111111111111111111111111111111",E="EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v";let i="0x0000000000000000000000000000000000000000";const T=({appId:a,originCurrency:t,destinationCurrency:e,...r})=>({tradeType:"EXPECTED_OUTPUT",originCurrency:t??i,destinationCurrency:e??i,referrer:`privy|${a}`,...r});let o="https://api.relay.link",c="https://api.testnets.relay.link";const b=async({input:a,isTestnet:t})=>{let e=await fetch((t?c:o)+"/quote",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),r=await e.json();if(!(e.ok||typeof r.message=="string"&&r.message.startsWith("Invalid address")))throw console.error("Relay error:",r),Error(r.message??"Error fetching quote from relay");return r},v=a=>{var e,r;let t=(r=(e=a.steps[0])==null?void 0:e.items)==null?void 0:r[0];if(t)return{from:t.data.from,to:t.data.to,value:Number(t.data.value),chainId:Number(t.data.chainId),data:t.data.data}};async function h({transactionHash:a,isTestnet:t}){var s;let e=await fetch((t?c:o)+"/requests/v2?hash="+a),r=await e.json();if(!e.ok)throw"message"in r&&typeof r.message=="string"?Error(r.message):Error("Error fetching request from relay");return((s=r.requests.at(0))==null?void 0:s.status)??"pending"}function k({transactionHash:a,isTestnet:t,bridgingStatus:e,setBridgingStatus:r,onSuccess:s,onFailure:l}){y.useEffect((()=>{if(a&&e){if(["delayed","waiting","pending"].includes(e)){let d=setInterval((async()=>{try{let n=await h({transactionHash:a,isTestnet:t});r(n)}catch(n){console.error(n)}}),1e3);return()=>clearInterval(d)}e==="success"?s({transactionHash:a}):["refund","failure"].includes(e)&&l({error:new p(a,t)})}}),[e,a,t])}class p extends u{constructor(t,e){super("We were unable to complete the bridging transaction. Funds will be refunded on your wallet.",void 0,f.TRANSACTION_FAILURE),this.relayLink=e?`https://testnets.relay.link/transaction/${t}`:`https://relay.link/transaction/${t}`}}export{v as d,k as f,p as h,E as n,T as o,m as r,w as s,b as u};
