import{d5 as h,d6 as m,dq as y,d4 as i,df as f,db as t,f2 as p,da as g,dM as w,ds as C}from"./index-BZUZJG0z.js";import{h as E}from"./reservoir-kvLjIrEo-Do6elMp6.js";import{n as x}from"./ScreenLayout-DIdy7nhJ-CtKEKsly.js";import{c as u}from"./createLucideIcon-B72mi0g_.js";import{L as A}from"./lock-C--KDDhh.js";import"./ModalHeader-D5psNgrf-BlEKM6aB.js";import"./Screen-q8npRQhQ-DadJ2eBF.js";import"./index-Dq_xe9dz-CmgW7sSb.js";/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],_=u("phone",S);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],a=u("triangle-alert",L),v=({error:n,allowlistConfig:r,onRetry:o,onCaptchaReset:s,onBack:d})=>{let l=((e,c)=>{if(e instanceof E)return{title:"Transaction failed",detail:i.jsxs(i.Fragment,{children:[i.jsx("span",{children:e.message}),i.jsxs("span",{children:[" ","Check the"," ",i.jsx(I,{href:e.relayLink,target:"_blank",children:"refund status"}),"."]})]}),ctaText:"Try again",icon:a};if(e instanceof f)switch(e.privyErrorCode){case t.CLIENT_REQUEST_TIMEOUT:return{title:"Timed out",detail:e.message,ctaText:"Try again",icon:a};case t.INSUFFICIENT_BALANCE:return{title:"Insufficient balance",detail:e.message,ctaText:"Try again",icon:a};case t.TRANSACTION_FAILURE:return{title:"Transaction failure",detail:e.message,ctaText:"Try again",icon:a};default:return{title:"Something went wrong",detail:"Try again later",ctaText:"Try again",icon:a}}else{if(e instanceof p&&e.type==="twilio_verification_failed")return{title:"Something went wrong",detail:e.message,ctaText:"Try again",icon:_};if(!(e instanceof g))return e instanceof w&&e.status&&[400,422].includes(e.status)?{title:"Something went wrong",detail:e.message,ctaText:"Try again",icon:a}:{title:"Something went wrong",detail:"Try again later",ctaText:"Try again",icon:a};switch(e.privyErrorCode){case t.INVALID_CAPTCHA:return{title:"Something went wrong",detail:"Please try again.",ctaText:"Try again",icon:a};case t.DISALLOWED_LOGIN_METHOD:return{title:"Not allowed",detail:e.message,ctaText:"Try another method",icon:a};case t.ALLOWLIST_REJECTED:return{title:c.errorTitle||"You don't have access to this app",detail:c.errorDetail||"Have you been invited?",ctaText:c.errorCtaText||"Try another account",icon:A};case t.CAPTCHA_FAILURE:return{title:"Something went wrong",detail:"You did not pass CAPTCHA. Please try again.",ctaText:"Try again",icon:null};case t.CAPTCHA_TIMEOUT:return{title:"Something went wrong",detail:"Something went wrong! Please try again later.",ctaText:"Try again",icon:null};case t.LINKED_TO_ANOTHER_USER:return{title:"Authentication failed",detail:"This account has already been linked to another user.",ctaText:"Try again",icon:a};case t.NOT_SUPPORTED:return{title:"This region is not supported",detail:"SMS authentication from this region is not available",ctaText:"Try another method",icon:a};case t.TOO_MANY_REQUESTS:return{title:"Request failed",detail:"Too many attempts.",ctaText:"Try again later",icon:a};default:return{title:"Something went wrong",detail:"Try again later",ctaText:"Try again",icon:a}}}})(n,r);return i.jsx(x,{title:l.title,subtitle:l.detail,icon:l.icon,onBack:d,iconVariant:"error",primaryCta:{label:l.ctaText,onClick:()=>{n instanceof g&&(n.privyErrorCode===t.INVALID_CAPTCHA&&(s==null||s()),n.privyErrorCode===t.ALLOWLIST_REJECTED&&r.errorCtaLink)?window.location.href=r.errorCtaLink:o==null||o()},variant:"error"},watermark:!0})},U={component:()=>{var c,T;let{navigate:n,data:r,lastScreen:o,currentScreen:s}=h(),d=m(),{reset:l}=y(),e=((c=r==null?void 0:r.errorModalData)==null?void 0:c.previousScreen)||(o===s?void 0:o);return i.jsx(v,{error:((T=r==null?void 0:r.errorModalData)==null?void 0:T.error)||Error(),allowlistConfig:d.allowlistConfig,onRetry:()=>{n(e||"LandingScreen",!1)},onCaptchaReset:l})}};let I=C.a`
  color: var(--privy-color-accent) !important;
  font-weight: 600;
`;export{U as ErrorScreen,v as ErrorScreenView,U as default};
