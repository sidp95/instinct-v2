import{d9 as c,d5 as E,dA as O,d6 as M,d7 as P,dX as F,d4 as e,eD as i,eX as W,ds as D}from"./index-BZUZJG0z.js";import{F as L}from"./LockClosedIcon-WCF_JC2b.js";import{T as B,b as G,F as U,m as $}from"./ModalHeader-D5psNgrf-BlEKM6aB.js";import{o as v}from"./ScreenHeader-CHmc4-Lu-D968ig42.js";import{o as H,d as Y,e as q,p as I}from"./styles-BsotlekN-BRoDfy88.js";function T({title:r,titleId:n,...a},l){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":n},a),r?c.createElement("title",{id:n},r):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"}))}const V=c.forwardRef(T);let d=D.div`
  width: 24px;
  height: 24px;
  display: flex;
  justify-content: center;
  align-items: center;
`,X={"google-drive":"Google Drive",icloud:"iCloud","user-passcode":"password",privy:"Privy","privy-v2":"Privy"},K=({onClose:r})=>e.jsxs(I,{children:[e.jsx(v,{title:"Why do I need to secure my account?",icon:e.jsx(U,{width:48}),description:e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"Your app uses cryptography to secure your account. App secrets are split and encrypted so only you can access them."}),e.jsx("p",{children:"To use this app on new devices, secure account secrets using a password, your Google or your Apple account. It’s important you don’t lose access to the method you choose."})]})}),e.jsx($,{onClick:r,children:"Select backup method"})]});const _={component:()=>{let[r,n]=c.useState(!1),{navigate:a,lastScreen:l,navigateBack:g,setModalData:m,data:t,onUserCloseViaDialogOrKeybindRef:j}=E(),{user:w}=O(),{embeddedWallets:f}=M(),{closePrivyModal:C}=P(),o=F(w),u=o===null,{isInAccountCreateFlow:S,isResettingPassword:k,shouldCreateEth:A,shouldCreateSol:R}=t.recoverySelection,h=o&&o.recoveryMethod!=="privy",b=h?e.jsxs("span",{children:["Your account is currently secured using"," ",e.jsx("strong",{children:X[(o==null?void 0:o.recoveryMethod)||"user-passcode"]}),"."]}):"Select a method for logging in on new devices and recovering your account.";function p(s){m({recoveryOAuthStatus:{provider:s,action:u?"create-wallet":"set-recovery",isInAccountCreateFlow:S,shouldCreateEth:A,shouldCreateSol:R}}),a("RecoveryOAuthScreen")}function y(){var s,x;(s=t==null?void 0:t.setWalletPassword)==null||s.onFailure(Error("User exited set recovery flow")),C({shouldCallAuthOnSuccess:((x=t==null?void 0:t.setWalletPassword)==null?void 0:x.callAuthOnSuccessOnClose)??!1})}return j.current=y,e.jsxs(e.Fragment,{children:[e.jsx(B,{onClose:y,backFn:r?()=>n(!1):l?g:void 0,infoFn:l||r?void 0:()=>n(!0)},"header"),r?e.jsx(K,{onClose:()=>n(!1)}):e.jsxs(e.Fragment,{children:[e.jsx(v,{title:h?"Update backup method":"Secure your account",icon:e.jsx(L,{width:48}),description:b}),e.jsx(H,{children:f.userOwnedRecoveryOptions.filter((s=>!["icloud","google-drive"].includes((o==null?void 0:o.recoveryMethod)||"")||s!==(o==null?void 0:o.recoveryMethod))).sort().map((s=>{switch(s){case"google-drive":return e.jsxs(i,{onClick:()=>p("google-drive"),children:[e.jsx(d,{children:e.jsx(q,{style:{width:18}})}),"Back up to Google Drive"]},s);case"icloud":return e.jsxs(i,{onClick:()=>p("icloud"),children:[e.jsx(d,{children:e.jsx(Y,{style:{width:24}})}),"Back up to Apple iCloud"]},s);case"user-passcode":return e.jsxs(i,{onClick:()=>{a(W({isCreatingWallet:u,skipSplashScreen:!0}))},children:[e.jsx(d,{children:e.jsx(V,{style:{width:18}})}),k?"Reset your":"Set a"," password"]},s);default:return null}}))})]}),e.jsx(G,{})]})}};export{_ as RecoverySelectionScreen,_ as default};
