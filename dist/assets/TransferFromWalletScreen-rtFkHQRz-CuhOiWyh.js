import{d7 as ne,d5 as le,d6 as oe,dc as ie,ef as ce,d9 as K,d4 as l,eA as re,eB as se,eC as V,eD as te,e3 as pe,dd as de,eE as ye,dy as X,dF as he,eF as me,ds as U}from"./index-BZUZJG0z.js";import{T as ue,b as Y}from"./ModalHeader-D5psNgrf-BlEKM6aB.js";import{o as we}from"./ScreenHeader-CHmc4-Lu-D968ig42.js";import{t as fe}from"./FundWalletMethodHeader-CI5afzwL-BZtXSULE.js";import{n as R}from"./Chip-D2-wZOHJ-DUiT6Tro.js";import{r as Te}from"./Subtitle-CV-2yKE4-D-H5V56C.js";import{l as Ce}from"./WalletOverflowButton-DWdepzzi-BmuqsSjq.js";import{i as ge}from"./InjectedWalletIcon-DLcYOGDj-DBB2QKeI.js";import{n as xe}from"./styles-CaJCyFB5-BHZKprYK.js";import"./LoadingSkeleton-U6-3yFwI-BqvAdjZO.js";import"./createLucideIcon-B72mi0g_.js";import"./WalletIcon-hh3-YJ30.js";import"./LinkPasskeyScreen-DJveInKu-fpSMIaSF.js";import"./TodoList-CgrU7uwu-C9JMyp_T.js";import"./check-BDT86Nu8.js";import"./ScreenLayout-DIdy7nhJ-CtKEKsly.js";import"./Screen-q8npRQhQ-DadJ2eBF.js";import"./index-Dq_xe9dz-CmgW7sSb.js";import"./circle-check-big-CartQiBB.js";import"./fingerprint-pattern-DCdiYDPD.js";const m=({provider:u,displayName:D,logo:_,connectOnly:t,connector:c})=>{var I,h,x;let F,{navigate:g,setModalData:B}=le(),{connectWallet:M}=ne(),w=pe(),y=de(u),j=c.connectorType==="wallet_connect_v2"?u:c.walletClientType,E=window.matchMedia("(display-mode: standalone)").matches,v=ye({connectorType:c.connectorType,walletClientType:j});F=v&&v.chainTypes.includes(c.chainType)?()=>{v.isInstalled||c.chainType==="solana"&&"isInstalled"in c&&c.isInstalled?(M(c,j),g(t?"ConnectOnlyStatusScreen":"ConnectionStatusScreen")):X.isMobile?(B({installWalletModalData:{walletConfig:v,chainType:c.chainType,connectOnly:t}}),g("WalletInterstitialScreen")):(B({installWalletModalData:{walletConfig:v,chainType:c.chainType,connectOnly:t}}),g("InstallWalletScreen"))}:c.connectorType!=="coinbase_wallet"||((I=c.coinbaseWalletConfig.preference)==null?void 0:I.options)!=="eoaOnly"||!X.isMobile||E||he()?()=>{(!me(window.navigator.userAgent)||event!=null&&event.isTrusted)&&(M(c,j),t?c.connectorType==="wallet_connect_v2"?(B((b=>({...b,externalConnectWallet:{...b==null?void 0:b.externalConnectWallet,preSelectedWalletId:"wallet_connect_qr"}}))),g("ConnectOnlyLandingScreen")):g("ConnectOnlyStatusScreen"):g("ConnectionStatusScreen"))}:()=>{window.location.href=`https://go.cb-w.com/dapp?cb_url=${encodeURI(window.location.href)}`};let S=D||((h=y==null?void 0:y.metadata)==null?void 0:h.shortName)||(y==null?void 0:y.name)||c.walletClientType;return l.jsxs(_e,{onClick:F,children:[l.jsx(ge,{icon:_||((x=y==null?void 0:y.image_url)==null?void 0:x.md),name:S}),l.jsx("span",{children:S}),l.jsxs(je,{id:"chip-container",children:[(w==null?void 0:w.walletClientType)===j&&(w==null?void 0:w.chainType)===c.chainType?l.jsx(Z,{color:"gray",children:"Recent"}):l.jsx("span",{id:"connect-text",children:"Connect"}),c.chainType==="solana"&&l.jsx(Z,{color:"gray",children:"Solana"})]})]})};let _e=U(te)`
  /* Wallet name text color */
  > span {
    color: var(--privy-color-foreground);
  }

  /* Show "Connect" on hover */
  > #chip-container > #connect-text {
    font-weight: 500;
    color: var(--privy-color-accent);
    opacity: 0;
    transition: opacity 0.1s ease-out;
  }

  :hover > #chip-container > #connect-text {
    opacity: 1;
  }

  @media (max-width: 440px) {
    > #chip-container > #connect-text {
      display: none;
    }
  }
`,Z=U(R)`
  margin-left: auto;
`,je=U.div`
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  margin-left: auto;
`;const ve=["coinbase_wallet","base_account"];let Se=["metamask","okx_wallet","rainbow","uniswap","bybit_wallet","ronin_wallet","haha_wallet","uniswap_extension","zerion","rabby_wallet","cryptocom","binance","kraken_wallet"];const be=["safe"],We=["phantom","backpack","solflare","jupiter","universal_profile"],Je={component:()=>{var P,q,H,Q;let u,{connectors:D}=ne(),{setModalData:_,data:t,navigate:c}=le(),F=oe(),{wallets:g}=ie(),B=D.filter(ce).flatMap((e=>e.wallets)),[M,w]=K.useState("default"),y=((P=t==null?void 0:t.funding)==null?void 0:P.chainType)==="solana",j=!!((q=t==null?void 0:t.funding)!=null&&q.crossChainBridgingEnabled);u=((H=t==null?void 0:t.funding)==null?void 0:H.chainType)==="ethereum"?t.funding.erc20Address&&!t.funding.isUSDC?"ethereum-only":j&&!t.funding.chain.testnet?"ethereum-and-solana":"ethereum-only":j&&!((Q=t.funding)!=null&&Q.isUSDC)?"ethereum-and-solana":"solana-only";let E=g.filter((e=>e.walletClientType!=="privy")),v=E.map((e=>e.walletClientType)),S=B.filter((e=>e.walletClientType!=="privy")),I=S.map((e=>e.walletClientType)),h=[],x={...t.funding};x.usingDefaultFundingMethod&&(x.usingDefaultFundingMethod=!1);let b=({wallet:e,walletChainType:o})=>{_({...t,funding:{...x,connectedWallet:e,onContinueWithExternalWallet:()=>c(z({destChainType:y?"solana":"ethereum",sourceChainType:o}))},solanaFundingData:t!=null&&t.solanaFundingData?{...t.solanaFundingData,sourceWalletData:{address:e.address,walletClientType:e.walletClientType}}:void 0}),c("FundingAmountEditScreen")};u!=="solana-only"&&h.push(...E.map(((e,o)=>l.jsx(ee,{onClick:()=>b({wallet:e,walletChainType:"ethereum"}),icon:e.meta.icon,name:e.meta.name,chainType:e.type},o)))),u!=="ethereum-only"&&h.push(...S.map(((e,o)=>l.jsx(ee,{onClick:()=>b({wallet:e,walletChainType:"solana"}),icon:e.meta.icon,name:e.meta.name,chainType:e.type},o)))),h.push(...(({walletList:e,walletChainType:o,connectors:A,connectOnly:p,ignore:$,walletConnectEnabled:W,forceWallet:O})=>{var G,J;let f=[],N=[],L=[],T=A.filter((d=>o==="ethereum-only"?d.chainType==="ethereum":o!=="solana-only"||d.chainType==="solana")),k=T.find((d=>d.connectorType==="wallet_connect_v2"));for(let[d,n]of(O?[O.wallet]:e).entries()){if(n==="detected_ethereum_wallets")for(let[i,a]of T.filter((({chainType:r,connectorType:s,walletClientType:C})=>r!=="solana"&&(C==="uniswap_wallet_extension"||C==="uniswap_extension"?!$.includes("uniswap"):C==="crypto.com_wallet_extension"||C==="crypto.com_onchain"?!$.includes("cryptocom"):s==="injected"&&!$.includes(C)))).entries()){let{walletClientType:r,walletBranding:s,chainType:C}=a;(r==="unknown"?N:f).push(l.jsx(m,{connectOnly:p,provider:r,logo:s.icon,displayName:s.name,connector:a},`${d}-${n}-${r}-${C}-${i}`))}if(n==="detected_solana_wallets")for(let[i,a]of T.filter((({chainType:r,walletClientType:s})=>{if(r==="solana")return o!=="ethereum-only"&&!$.includes(s)})).entries()){let{walletClientType:r,walletBranding:s,chainType:C}=a;(r==="unknown"?N:f).push(l.jsx(m,{connectOnly:p,provider:r,logo:s.icon,displayName:s.name,connector:a},`${d}-${n}-${r}-${C}-${i}`))}if(We.includes(n)){let i=T.find((a=>a.connectorType==="injected"&&a.walletClientType===n||a.connectorType===n));if(i&&f.push(l.jsx(m,{connectOnly:p,provider:n,connector:i},`${d}-${n}`)),o==="solana-only"||o==="ethereum-and-solana"){let a=T.find((({chainType:r,walletClientType:s})=>r==="solana"&&s===n));a&&f.push(l.jsx(m,{connectOnly:p,provider:n,connector:a},`${n}-solana`))}}else if(Se.includes(n)){let i=T.find((a=>n==="uniswap"?a.walletClientType==="uniswap_wallet_extension"||a.walletClientType==="uniswap_extension":n==="cryptocom"?a.walletClientType==="crypto.com_wallet_extension"||a.walletClientType==="crypto.com_onchain":a.connectorType==="injected"&&a.walletClientType===n));if(W&&!i&&(i=k),i&&f.push(l.jsx(m,{connectOnly:p,provider:n,connector:i,logo:i.connectorType==="injected"?i.walletBranding.icon:void 0,displayName:i.connectorType==="injected"?i.walletBranding.name:void 0},`${d}-${n}`)),o==="solana-only"||o==="ethereum-and-solana"){let a=T.find((({chainType:r,walletClientType:s})=>r==="solana"&&s===n));a&&f.push(l.jsx(m,{connectOnly:p,provider:n,connector:a},`${n}-solana`))}}else if(ve.includes(n)){let i=T.find((({connectorType:a})=>a===n));i&&f.push(l.jsx(m,{connectOnly:p,provider:n,connector:i,displayName:i.walletClientType==="coinbase_wallet"?"Coinbase":"Base",logo:i.walletClientType==="coinbase_wallet"?re:se},`${d}-${n}`))}else if(be.includes(n))k&&L.push(l.jsx(m,{connectOnly:p,provider:n,connector:k},`${d}-${n}`));else if(n==="wallet_connect")k&&L.push(l.jsx(m,{connectOnly:p,provider:n,connector:k,logo:k.walletBranding.icon,displayName:"WalletConnect"},`${d}-${n}`));else if(n===(O==null?void 0:O.wallet)){let i=O.chainType==="ethereum"&&e.includes("detected_ethereum_wallets"),a=O.chainType==="solana"&&e.includes("detected_solana_wallets");if(i||a){let r=T.find((({walletClientType:s})=>s===n));r&&f.push(l.jsx(m,{connectOnly:p,provider:n,displayName:(G=r.walletBranding)==null?void 0:G.name,logo:(J=r.walletBranding)==null?void 0:J.icon,connector:r},`${d}-${n}`))}}}return[...N,...f,...L]})({walletList:F.appearance.walletList.filter((e=>!E.some((o=>o.walletClientType===e))&&!S.some((o=>o.walletClientType===e)))),walletChainType:u,connectors:D,connectOnly:!0,ignore:[...F.appearance.walletList,...v,...I],walletConnectEnabled:F.externalWallets.walletConnect.enabled}));let ae=l.jsx(Ce,{text:"More wallets",onClick:()=>w("overflow")}),z=({sourceChainType:e,destChainType:o})=>e==="ethereum"&&o==="solana"?"AwaitingEvmToSolBridgingScreen":e==="ethereum"&&o==="ethereum"?"AwaitingExternalEthereumTransferScreen":e==="solana"&&o==="ethereum"?"AwaitingSolToEvmBridgingScreen":x.externalSolanaFundingScreen;return K.useEffect((()=>{_({...t,externalConnectWallet:{onCompleteNavigateTo:({address:e,walletClientType:o,walletChainType:A})=>{let p=A??"ethereum",$=p==="ethereum"?E.find((W=>W.address===e&&W.walletClientType===o)):S.find((W=>W.address===e&&W.walletClientType===o));return _({...t,funding:{...x,connectedWallet:$,onContinueWithExternalWallet:()=>{c(z({destChainType:y?"solana":"ethereum",sourceChainType:p}))}},solanaFundingData:t!=null&&t.solanaFundingData?{...t.solanaFundingData,sourceWalletData:{address:e||"",walletClientType:o||""}}:void 0}),"FundingAmountEditScreen"}}})}),[]),l.jsxs(l.Fragment,M==="overflow"?{children:[l.jsx(ue,{backFn:()=>w("default")},"header"),l.jsxs(V,{children:[l.jsx(Te,{style:{color:"var(--privy-color-foreground-3)",textAlign:"left"},children:"More wallets"}),h]}),l.jsx(Y,{})]}:{children:[l.jsx(fe,{}),l.jsx(we,{title:"Transfer from wallet",description:"Connect a wallet to deposit funds or send funds manually to your wallet address."}),l.jsxs(V,{children:[h.length>4?h.slice(0,3):h,h.length>4&&ae]}),l.jsx(Y,{})]})}};let ee=({onClick:u,icon:D,name:_,chainType:t})=>l.jsxs(te,{onClick:u,children:[l.jsx(xe,{style:{width:20},children:l.jsx("img",{src:D})}),_,l.jsx(R,{color:"gray",style:{marginLeft:"auto"},children:"Connected"}),t==="solana"&&l.jsx(R,{color:"gray",children:"Solana"})]});export{Je as TransferFromWalletScreen,Je as default};
