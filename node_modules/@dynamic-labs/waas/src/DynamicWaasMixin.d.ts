import { BitcoinConfig, DynamicWalletClient } from '@dynamic-labs-wallet/browser-wallet-client';
import { InstrumentOptions, Logger } from '@dynamic-labs/logger';
import { MFAAction } from '@dynamic-labs/sdk-api-core';
import { InstrumentContext, InstrumentationTimer, TraceContext } from '../utils/instrumentation';
export declare class WaasExportHandler {
    private iframeStamper;
    setIframeStamper(iframe: HTMLIFrameElement): void;
    clear(): void;
}
export declare const withDynamicWaas: <T extends abstract new (...args: any[]) => any>(BaseClass: T) => (abstract new (...args: any[]) => {
    [x: string]: any;
    name: string;
    overrideKey: string;
    isEmbeddedWallet: boolean;
    getSignedSessionId?: (() => Promise<string>) | undefined;
    getMfaToken?: ((props?: {
        mfaAction?: MFAAction;
    }) => Promise<string | undefined>) | undefined;
    getAuthToken?: (() => string) | undefined;
    environmentId?: string | undefined;
    baseApiUrl?: string | undefined;
    relayUrl?: string | undefined;
    baseClientKeysharesRelayApiUrl?: string | undefined;
    dynamicWaasClient: DynamicWalletClient | undefined;
    chainName: string;
    authMode: 'cookie' | 'header';
    logger: Logger;
    __exportHandler: WaasExportHandler;
    validateActiveWallet(expectedAddress: string): Promise<void>;
    setGetAuthTokenFunction(getAuthToken: () => string): void;
    setWaasAuthMode(authMode: 'cookie' | 'header'): void;
    setGetMfaTokenFunction(getMfaToken: (props?: {
        mfaAction?: MFAAction;
    }) => Promise<string | undefined>): void;
    setEnvironmentId(environmentId: string): void;
    setBaseApiUrl(baseApiUrl: string): void;
    setBaseClientKeysharesRelayApiUrl(baseClientKeysharesRelayApiUrl?: string): void;
    setRelayUrl(relayUrl: string): void;
    setGetSignedSessionIdFunction(getSignedSessionId: () => Promise<string>): void;
    delegateKeyShares({ accountAddress, password, }: {
        accountAddress: string;
        password?: string;
    }): Promise<void>;
    createDynamicWaasClient(traceContext?: TraceContext): Promise<DynamicWalletClient>;
    getWaasWalletClient(traceContext?: TraceContext): Promise<DynamicWalletClient>;
    createWalletAccount({ thresholdSignatureScheme, password, bitcoinConfig, }?: {
        thresholdSignatureScheme?: string;
        password?: string;
        bitcoinConfig?: BitcoinConfig;
    }): Promise<{
        chainName: string;
        accountAddress: string;
        publicKeyHex: string;
        rawPublicKey: string | Uint8Array | undefined;
    }>;
    importPrivateKey({ privateKey, thresholdSignatureScheme, publicAddressCheck, addressType, legacyWalletId, }: {
        privateKey: string;
        thresholdSignatureScheme?: string;
        publicAddressCheck?: string;
        addressType?: string;
        legacyWalletId?: string;
    }): Promise<void>;
    exportPrivateKey({ accountAddress, displayContainer, password, }?: {
        accountAddress?: string;
        displayContainer?: HTMLIFrameElement;
        password?: string;
    }): Promise<void>;
    getExportHandler(): {
        clear: () => void;
    };
    exportClientKeyshares({ accountAddress, password, }: {
        accountAddress: string;
        password?: string;
    }): Promise<void>;
    backupKeySharesToGoogleDrive({ accountAddress, password, }: {
        accountAddress: string;
        password?: string;
    }): Promise<void>;
    exportClientKeysharesFromGoogleDrive({ accountAddress, password, }: {
        accountAddress: string;
        password?: string;
    }): Promise<void>;
    backupKeySharesToICloud({ accountAddress, password, }: {
        accountAddress: string;
        password?: string;
    }): Promise<void>;
    displayICloudSignIn({ displayContainer, }: {
        displayContainer: HTMLElement;
    }): Promise<void>;
    hideICloudSignIn(): Promise<void>;
    isICloudAuthenticated(): Promise<boolean>;
    refreshWalletAccountShares({ accountAddress, password, }: {
        accountAddress: string;
        password?: string;
    }): Promise<void>;
    reshareWalletAccountShares({ accountAddress, thresholdSignatureScheme, password, }: {
        accountAddress: string;
        thresholdSignatureScheme: string;
        password?: string;
    }): Promise<void>;
    revokeDelegation({ accountAddress, password, }: {
        accountAddress: string;
        password?: string;
    }): Promise<void>;
    updatePassword({ accountAddress, existingPassword, newPassword, }: {
        accountAddress: string;
        existingPassword: string;
        newPassword: string;
    }): Promise<void>;
    signRawMessage({ accountAddress, message, password, }: {
        accountAddress: string;
        message: string;
        password?: string;
    }): Promise<string>;
    endSession(): Promise<void>;
    getActiveAccountAddress(): Promise<string | undefined>;
    /**
     * Get connected accounts by fetching wallets from Waas client.
     */
    getConnectedAccounts(): Promise<string[]>;
    generateTraceId(): string;
    /**
     * Helper method to instrument with automatic properties inclusion
     */
    instrument(message: string, context: InstrumentOptions & InstrumentContext & Record<string, any>): void;
    instrumentAsync<T_1>({ operation, resource, fn, context, }: {
        operation: string;
        resource: string;
        fn: (timing: InstrumentationTimer) => Promise<T_1>;
        context?: Record<string, any> | undefined;
    }): Promise<T_1>;
}) & T;
