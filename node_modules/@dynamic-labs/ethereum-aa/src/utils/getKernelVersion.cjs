'use client'
'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

var constants = require('@zerodev/sdk/constants');
var sdkApiCore = require('@dynamic-labs/sdk-api-core');
var logger = require('./logger.cjs');

const KERNEL_VERSION_MAP = {
    [sdkApiCore.ProviderKernelVersionEnum.V33]: constants.KERNEL_V3_3,
    [sdkApiCore.ProviderKernelVersionEnum.V32]: constants.KERNEL_V3_2,
    [sdkApiCore.ProviderKernelVersionEnum.V31]: constants.KERNEL_V3_1,
    [sdkApiCore.ProviderKernelVersionEnum.V30]: constants.KERNEL_V3_0,
    [sdkApiCore.ProviderKernelVersionEnum.V24]: constants.KERNEL_V2_4,
};
const ENTRY_POINT_VERSION_MAP = {
    0.6: constants.KERNEL_V2_4,
    0.7: constants.KERNEL_V3_1,
    0.8: constants.KERNEL_V3_3,
};
const getKernelVersion = (kernelVersion, entryPointAddress) => {
    // If kernel version is explicitly provided, use it
    if (kernelVersion && kernelVersion in KERNEL_VERSION_MAP) {
        return KERNEL_VERSION_MAP[kernelVersion];
    }
    // If no kernel version provided, determine based on entry point version
    const entryPointVersion = entryPointAddress.version;
    if (entryPointVersion in ENTRY_POINT_VERSION_MAP) {
        return ENTRY_POINT_VERSION_MAP[entryPointVersion];
    }
    // Fallback to latest version with warning
    logger.logger.error('Invalid kernel version', kernelVersion);
    return constants.KERNEL_V3_3;
};

exports.getKernelVersion = getKernelVersion;
