"use strict";var e=require("react/jsx-runtime"),r=require("lucide-react"),t=require("react"),i=require("./WalletInfoCard-wDKvmmsx.js"),s=require("./context-B8VkgLLk.js"),n=require("./internal-context-NWsAL807.js"),o=require("./get-is-unified-wallet--p0rdEtP.js"),a=require("./ScreenLayout-DND5buhY.js");require("styled-components"),require("./ModalHeader-HFJct04e.js"),require("./useActiveWallet-Wp8zv7qb.js"),require("zustand"),require("react-device-detect"),require("./prepareFundingModalData-BADfvap9.js"),require("@privy-io/js-sdk-core"),require("eventemitter3"),require("./events-context-Di6--rDg.js"),require("viem"),require("viem/utils"),require("./getPublicClient-CGlodIp_.js"),require("./useWallets-DEyFRWD0.js"),require("@heroicons/react/24/outline/ArrowLeftIcon"),require("@heroicons/react/24/outline/ArrowRightIcon"),require("@heroicons/react/24/outline/QuestionMarkCircleIcon"),require("@heroicons/react/24/outline/XMarkIcon"),require("./ErrorMessage-BfTVyue9.js"),require("./LabelXs-C8rLnCfU.js"),require("./Address-DiSm2l-W.js"),require("./shared-DBm7PUrg.js"),require("tinycolor2"),require("ofetch"),require("./Screen-M6XQZTd0.js"),require("./index-ByFhjjzH.js");const c=({appName:t,address:s,success:n,error:o,onAccept:c,onDecline:u,onClose:l})=>n||o?/*#__PURE__*/e.jsx(a.ScreenLayout,{title:o?"Something went wrong":"Success!",subtitle:o?"Please try again.":`You've successfully granted delegated action permissions to ${t}.`,icon:o?r.AlertCircle:r.CheckCircle,iconVariant:o?"error":"success",onBack:l,watermark:!0}):/*#__PURE__*/e.jsx(a.ScreenLayout,{title:"Enable offline access",subtitle:`By confirming, ${t} will be able to use your wallet for you even when you're not around. You can revoke this later.`,icon:r.CloudUpload,primaryCta:{label:"Accept",onClick:c},secondaryCta:{label:"Not now",onClick:u},onBack:l,watermark:!0,children:/*#__PURE__*/e.jsx(i.WalletInfoCard,{address:s,title:"Wallet"})}),u={component:()=>{let{data:r}=o.usePrivyModal(),i=s.useAppConfig(),{closePrivyModal:a}=n.usePrivyInternal(),[u,l]=t.useState(!1),[d,q]=t.useState(),{address:j,onDelegate:C,onSuccess:y,onError:p}=r.delegatedActions.consent,g=async()=>{u?y():p(d??new n.PrivyClientError("User declined delegating actions.")),a({shouldCallAuthOnSuccess:!1})};return t.useEffect((()=>{if(!u&&!d)return;let e=setTimeout(g,s.DEFAULT_SUCCESS_SCREEN_LONG_DURATION_MS);return()=>clearTimeout(e)}),[u,d]),/*#__PURE__*/e.jsx(c,{appName:i.name,address:j,success:u,error:d,onAccept:async()=>{try{await C(),l(!0)}catch(e){q(e)}},onDecline:()=>{g()},onClose:g})}};exports.DelegatedActionsConsentScreen=u,exports.DelegatedActionsConsentScreenView=c,exports.default=u;
